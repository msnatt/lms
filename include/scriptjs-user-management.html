<!-- page product -->
<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const response = await fetch("../config/Fetch_user.php"); // เรียกใช้ PHP
        const json_res = await response.json();
        let users = json_res;
        console.log(users);

        let table = document.getElementById('table_user').getElementsByTagName('tbody')[0];

        users.forEach(user => {
            let newRow = table.insertRow();
            newRow.insertCell(0).innerHTML = user.name;
            newRow.insertCell(1).innerHTML = user.code;
            // let cell1 = newRow.insertCell(1);
            // cell1.innerHTML = user.name;
            // cell1.style.textAlign = "center"; // จัดให้อยู่ตรงกลาง
            newRow.insertCell(2).innerHTML = user.telephone;
            newRow.insertCell(3).innerHTML = user.is_admin == 1 ? "Admin" : "Student";
            let cell04 = newRow.insertCell(4);
            cell04.className = "";
            cell04.style.maxWidth = "100px";
            cell04.style.textAlign = "center"; // จัดให้อยู่ตรงกลาง
            cell04.innerHTML = `
                <div style="display: flex; gap: 5px; width: 100%;">
                    <button class="btn btn-secondary" onclick="toggle("reset_user",<?= $user['id']?>)">
                        <i class="bi bi-arrow-counterclockwise"></i> Reset Password
                    </button>
                    <button class="btn btn-danger" onclick="toggle("deleted_user",<?= $user['id']?>)">
                        <i class="bi bi-trash3"></i> Delete
                    </button>
                </div>
            `;

        });
    });

    function toggle(id, user_id) {
        let div = document.getElementById(id);
        var is_visible = div.style.display == "none";
        div.style.display = is_visible ? "block" : "none";
    };
</script>